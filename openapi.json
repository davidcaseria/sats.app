{"openapi":"3.1.0","info":{"title":"backend","description":"","license":{"name":"MIT","url":"https://opensource.org/license/mit/"},"version":"0.1.0"},"paths":{"/backup":{"get":{"tags":[],"operationId":"get_backup_db","responses":{"200":{"description":"Returns the backup file as binary data"},"404":{"description":"Backup not found"}}},"put":{"tags":[],"operationId":"put_backup_db","responses":{"200":{"description":"Database backup successful"},"400":{"description":"Invalid file or file too large"}}}},"/mints":{"post":{"tags":[],"operationId":"create_mint","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MintOauthRequest"}}},"required":true},"responses":{"201":{"description":"Mint created"}}}},"/mints/{mint_id}/users":{"get":{"tags":[],"operationId":"list_users","parameters":[{"name":"mint_id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"List users"}}},"post":{"tags":[],"operationId":"add_user","parameters":[{"name":"mint_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddUserRequest"}}},"required":true},"responses":{"201":{"description":"User added"}}}},"/mints/{mint_id}/users/{user_id}":{"delete":{"tags":[],"operationId":"delete_user","parameters":[{"name":"mint_id","in":"path","required":true,"schema":{"type":"string"}},{"name":"user_id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"User deleted"}}}},"/payment-requests":{"get":{"tags":[],"operationId":"list_payment_requests","parameters":[{"name":"f","in":"query","required":false,"schema":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/UserPayFilter"}]}}],"responses":{"200":{"description":"List payment requests","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PaymentRequestResponse"}}}}}}},"post":{"tags":[],"operationId":"create_payment_request","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentRequest"}}},"required":true},"responses":{"201":{"description":"Payment request created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentRequestResponse"}}}},"400":{"description":"Invalid payment request format"},"500":{"description":"Internal server error"}}}},"/payment-requests/{id}":{"get":{"tags":[],"operationId":"get_payment_request","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Get payment request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentRequestResponse"}}}}}},"delete":{"tags":[],"operationId":"delete_payment_request","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Payment request deleted"},"400":{"description":"Invalid request format"},"403":{"description":"Not authorized"},"404":{"description":"Payment request not found"},"500":{"description":"Internal server error"}}}},"/tokens/{id}":{"get":{"tags":[],"operationId":"get_token","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Get encrypted token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}}}},"post":{"tags":[],"operationId":"store_token","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRequest"}}},"required":true},"responses":{"201":{"description":"Token stored"},"400":{"description":"Invalid request","content":{"text/plain":{"schema":{"type":"string"}}}},"500":{"description":"Internal server error","content":{"text/plain":{"schema":{"type":"string"}}}}}}},"/users":{"get":{"tags":[],"operationId":"search_users","parameters":[{"name":"s","in":"query","required":false,"schema":{"type":["string","null"]}}],"responses":{"200":{"description":"Search users","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"}}}}},"400":{"description":"Invalid search query"},"500":{"description":"Internal server error"}}}},"/users/{id}/picture":{"get":{"tags":[],"operationId":"get_user_picture","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Returns the user profile picture as binary data"},"404":{"description":"Picture not found"}}},"put":{"tags":[],"operationId":"put_user_picture","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Profile picture uploaded successfully"},"400":{"description":"Invalid image or file too large"}}}}},"components":{"schemas":{"AddUserRequest":{"type":"object","required":["user_id"],"properties":{"user_id":{"type":"string"}}},"MintOauthRequest":{"type":"object","required":["name"],"properties":{"name":{"type":"string"}}},"PaymentRequest":{"type":"object","required":["encoded"],"properties":{"encoded":{"type":"string"},"payer_user_id":{"type":["string","null"],"format":"uuid"}}},"PaymentRequestFilter":{"type":"object","properties":{"f":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/UserPayFilter"}]}}},"PaymentRequestResponse":{"type":"object","required":["id","encoded","payee_user"],"properties":{"encoded":{"type":"string"},"id":{"type":"string","format":"uuid"},"payee_user":{"$ref":"#/components/schemas/UserResponse"},"payer_user":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/UserResponse"}]},"token":{"type":["string","null"]}}},"TokenRequest":{"type":"object","required":["encrypted_token"],"properties":{"encrypted_token":{"type":"string"},"payee_user_id":{"type":["string","null"],"format":"uuid"}}},"TokenResponse":{"type":"object","required":["encrypted_token","payer_user"],"properties":{"encrypted_token":{"type":"string"},"payee_user":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/UserResponse"}]},"payer_user":{"$ref":"#/components/schemas/UserResponse"}}},"UserPayFilter":{"type":"string","enum":["All","Payer","Payee"]},"UserResponse":{"type":"object","required":["id","username","pubkey"],"properties":{"id":{"type":"string","format":"uuid"},"pubkey":{"type":"string"},"username":{"type":"string"}}},"UserSearchQuery":{"type":"object","properties":{"s":{"type":["string","null"]}}}}},"tags":[{"name":"api","description":"Sats App API"}]}